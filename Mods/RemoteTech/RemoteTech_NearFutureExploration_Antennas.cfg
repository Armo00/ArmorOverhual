// Modified 2024-02-03
// Support for Near-Future Exploration antennas and reflectors

// Antennas
@PART[nfex-antenna-rover-1]:After[RemoteTech]
{
    %MODULE[ModuleRTAntenna] {
        %Mode0DishRange = 0
        %Mode1DishRange = 20000000
        %EnergyCost = 0.00013020833333333333
        %MaxQ = 3000
        %DishAngle = 15.0
        
        %TRANSMITTER {
            %PacketInterval = 0.3
            %PacketSize = 2
            %PacketResourceCost = 15.0
        }
    }
    
    %MODULE[ModuleSPUPassive] {}
    !MODULE[TweakScale] {}
    %MODULE[TweakScale]
    {
        type = free
    }
}

@PART[nfex-antenna-rover-2]:After[RemoteTech]
{
    %MODULE[ModuleRTAntenna] {
        %Mode0DishRange = 0
        %Mode1DishRange = 9000000
        %EnergyCost = 0.000046875
        %MaxQ = 3000
        %DishAngle = 12.0
        
        %TRANSMITTER {
            %PacketInterval = 0.3
            %PacketSize = 2
            %PacketResourceCost = 15.0
        }
    }
    
    %MODULE[ModuleSPUPassive] {}
    !MODULE[TweakScale] {}
    %MODULE[TweakScale]
    {
        type = free
    }
}

@PART[nfex-antenna-rover-3]:After[RemoteTech]
{
    %MODULE[ModuleRTAntenna] {
        %Mode0DishRange = 0
        %Mode1DishRange = 50000000
        %EnergyCost = 0.0006510416666666666
        %MaxQ = 3000
        %DishAngle = 30.0
        
        %TRANSMITTER {
            %PacketInterval = 0.3
            %PacketSize = 2
            %PacketResourceCost = 15.0
        }
    }
    
    %MODULE[ModuleSPUPassive] {}
    !MODULE[TweakScale] {}
    %MODULE[TweakScale]
    {
        type = free
    }
}

@PART[nfex-antenna-static-mini-1]:After[RemoteTech]
{
    %MODULE[ModuleRTAntenna] {
        %Mode0DishRange = 0
        %Mode1DishRange = 1300000000
        %EnergyCost = 0.0028211805555555555
        %MaxQ = 6000
        %DishAngle = 5.0
        
        %TRANSMITTER {
            %PacketInterval = 0.3
            %PacketSize = 2
            %PacketResourceCost = 15.0
        }
    }
    
    %MODULE[ModuleSPUPassive] {}
    !MODULE[TweakScale] {}
    %MODULE[TweakScale]
    {
        type = free
    }
}

// D-2 Spot Antenna
// Range: 64000km     Angle: 15.0     Idle Power: 0.71w     Transmitting Power: 12.73w     Speed: 5.0Mbps
@PART[nfex-antenna-top-dish-1]:FINAL
{
    @rescaleFactor = 2.0
    @title = D-2 Spot Antenna
    @description = A lower power antenna for GEOsynchronous communcations. Rated for 5.0Mbps @64000km.
    @cost = 650
    @entryCost = 750
    @mass = 0.04
    %MODULE[TweakScale]
    {
        %type = free
    }
    %MODULE[ModuleSPUPassive] {}
    @MODULE[ModuleRTAntenna]
    {
        @EnergyCost = 0.00019634375
        @Mode1DishRange = 64000000
        %DishAngle = 15.0
        %TRANSMITTER
        {
            %PacketInterval = 1
            %PacketSize = 5.0
            %PacketResourceCost = 0.003536776573484133
        }
    }
    %MODULE[ModuleAntennaFeed]
    {
        %FeedTransformName = AntennaFeedVector
        %FeedScale = 1
    }
}

// D-50 Large Spot Antenna
// Range: 64000km     Angle: 15.0     Idle Power: 2.83w     Transmitting Power: 318.31w     Speed: 500.0Mbps
@PART[nfex-antenna-top-dish-2]:FINAL
{
    @rescaleFactor = 2.0
    @title = D-50 Large Spot Antenna
    @description = A medium power antenna for GEOsynchronous communcations. Unparalelled transmission rates. Rated for 500.0Mbps @64000km.
    @cost = 800
    @entryCost = 750
    @mass = 0.1
    %MODULE[TweakScale]
    {
        %type = free
    }
    %MODULE[ModuleSPUPassive] {}
    @MODULE[ModuleRTAntenna]
    {
        @EnergyCost = 0.000785375
        @Mode1DishRange = 64000000
        %DishAngle = 15.0
        %TRANSMITTER
        {
            %PacketInterval = 1
            %PacketSize = 500.0
            %PacketResourceCost = 0.08841941433710333
        }
    }
    %MODULE[ModuleAntennaFeed]
    {
        %FeedTransformName = AntennaFeedVector
        %FeedScale = 1
    }
}

@PART[nfex-antenna-phased-single-1]:After[RemoteTech]
{
    %MODULE[ModuleRTAntenna] {
        %Mode0DishRange = 0
        %Mode1DishRange = 1200000
        %EnergyCost = 0.03
        %MaxQ = 3000
        %DishAngle = 12.0
        
        %TRANSMITTER {
            %PacketInterval = 0.3
            %PacketSize = 2
            %PacketResourceCost = 15.0
        }
    }
    
    %MODULE[ModuleSPUPassive] {}
    !MODULE[TweakScale] {}
    %MODULE[TweakScale]
    {
        type = free
    }
}

@PART[nfex-antenna-phased-single-2]:After[RemoteTech]
{
    %MODULE[ModuleRTAntenna] {
        %Mode0DishRange = 0
        %Mode1DishRange = 8000000
        %EnergyCost = 0.2
        %MaxQ = 3000
        %DishAngle = 12.0
        
        %TRANSMITTER {
            %PacketInterval = 0.3
            %PacketSize = 2
            %PacketResourceCost = 15.0
        }
    }
    
    %MODULE[ModuleSPUPassive] {}
    !MODULE[TweakScale] {}
    %MODULE[TweakScale]
    {
        type = free
    }
}

@PART[nfex-antenna-phased-single-3]:After[RemoteTech]
{
    %MODULE[ModuleRTAntenna] {
        %Mode0DishRange = 0
        %Mode1DishRange = 18000000
        %EnergyCost = 0.5
        %DishAngle = 22.0
        
        %TRANSMITTER {
            %PacketInterval = 0.3
            %PacketSize = 2
            %PacketResourceCost = 15.0
        }
    }
    
    %MODULE[ModuleSPUPassive] {}
    !MODULE[TweakScale] {}
    %MODULE[TweakScale]
    {
        type = free
    }
}

// DR-3
// Range:0.7 million km     Angle: 10째    Power: 10.9375w
@PART[nfex-antenna-deploy-wv3-1]:After[RemoteTech]
{
    @description ^= :$:  Rated for 0.7 million km.:
    %MODULE[ModuleRTAntenna] {
        %Mode0DishRange = 0
        %Mode1DishRange = 700000000 // 0.7 million km   
        %EnergyCost = 0.0030381944444444445
        %MaxQ = 6000
        %DishAngle = 10.0
        
        %TRANSMITTER {
            %PacketInterval = 0.3
            %PacketSize = 2
            %PacketResourceCost = 15.0
        }
    }
    
    %MODULE[ModuleSPUPassive] {}
    !MODULE[TweakScale] {}
    %MODULE[TweakScale]
    {
        type = free
    }
}

// F-DA Direct Antenna Feed
// Range: 5km     Angle: 10.0     Idle Power: 0.0w     Transmitting Power: 1.11w     Speed: 5.0Mbps
@PART[nfex-antenna-feeder-direct-1]:FINAL
{
    @title = F-DA Direct Antenna Feed
    @description = A single antenna feedhorn providing direct transmission capability. Poor range on its own - pair with a large reflector to use effectively Rated for 5.0Mbps @5km.
    @cost = 210
    @entryCost = 700
    @mass = 0.006
    %MODULE[TweakScale]
    {
        %type = free
    }
    %MODULE[ModuleSPUPassive] {}
    @MODULE[ModuleRTAntenna]
    {
        @EnergyCost = 7.853750000000001e-08
        @Mode1DishRange = 5000
        %DishAngle = 10.0
        %TRANSMITTER
        {
            %PacketInterval = 1
            %PacketSize = 5.0
            %PacketResourceCost = 0.00030701185533716437
        }
    }
    %MODULE[ModuleAntennaFeed]
    {
        %FeedTransformName = AntennaFeedVector
        %FeedScale = 1
    }
}

// F-RA Relay Antenna Feed
// Range: 5km     Angle: 15.0     Idle Power: 0.0w     Transmitting Power: 5.53w     Speed: 100.0Mbps
@PART[nfex-antenna-feeder-relay-1]:FINAL
{
    @title = F-RA Relay Antenna Feed
    @description = A trio of antenna feedhorns providing relay capability. Poor range on its own - pair with a large reflector to use effectively. Rated for 100.0Mbps @5km.
    @cost = 500
    @entryCost = 700
    @mass = 0.009
    %MODULE[TweakScale]
    {
        %type = free
    }
    %MODULE[ModuleSPUPassive] {}
    @MODULE[ModuleRTAntenna]
    {
        @EnergyCost = 7.068375e-07
        @Mode1DishRange = 5000
        %DishAngle = 15.0
        %TRANSMITTER
        {
            %PacketInterval = 1
            %PacketSize = 100.0
            %PacketResourceCost = 0.0015350592766858223
        }
    }
    %MODULE[ModuleAntennaFeed]
    {
        %FeedTransformName = AntennaFeedVector
        %FeedScale = 1
    }
}


// RA-X1 Phased Relay Antenna
// Range: 10000km     Angle: 90.0     Idle Power: 0.71w     Transmitting Power: 2864.79w     Speed: 200.0Mbps
@PART[nfex-antenna-phased-array-1]:FINAL
{
    @rescaleFactor = 2.0
    @title = RA-X1 Phased Relay Antenna
    @description = An advanced and compact phased array relay which fits nicely on small probes and rovers. Can push a large amount of data at a very fast rate, if you have the power to do so. Rated for 200.0Mbps @10000km.
    @cost = 50
    @entryCost = 1000
    @mass = 0.05
    %MODULE[TweakScale]
    {
        %type = free
    }
    %MODULE[ModuleSPUPassive] {}
    @MODULE[ModuleRTAntenna]
    {
        @EnergyCost = 0.00019634375
        @Mode1DishRange = 10000000
        %DishAngle = 90.0
        %MaxQ = 6000
        %TRANSMITTER
        {
            %PacketInterval = 1
            %PacketSize = 200.0
            %PacketResourceCost = 0.7957747290339301
        }
    }
    %MODULE[ModuleAntennaFeed]
    {
        %FeedTransformName = AntennaFeedVector
        %FeedScale = 1
    }
}


// RA-X3 Phased Relay Antenna
// Range: 400000km     Angle: 130.0     Idle Power: 13.68w     Transmitting Power: 12349.49w     Speed: 200.0Mbps
@PART[nfex-antenna-phased-array-2]:FINAL
{
    @title = RA-X3 Phased Relay Antenna
    @description = A high power phased antenna relay that is also reflective in the visible range. Watch for flares! Can transmit a large amount of science data at a very fast rate, if you have the power to do so. Rated for 200.0Mbps @400000km.
    @cost = 2500
    @entryCost = 10000
    @mass = 0.15
    %MODULE[TweakScale]
    {
        %type = free
    }
    %MODULE[ModuleSPUPassive] {}
    @MODULE[ModuleRTAntenna]
    {
        @EnergyCost = 0.003801215000000001
        @Mode1DishRange = 400000000
        %DishAngle = 130.0
        %MaxQ = 6000
        %TRANSMITTER
        {
            %PacketInterval = 1
            %PacketSize = 200.0
            %PacketResourceCost = 3.4304134579821994
        }
    }
    %MODULE[ModuleAntennaFeed]
    {
        %FeedTransformName = AntennaFeedVector
        %FeedScale = 1
    }
}

// RA-X2 Phased Relay Antenna
// Range: 100000km     Angle: 60.0     Idle Power: 3.42w     Transmitting Power: 2630.66w     Speed: 200.0Mbps
@PART[nfex-antenna-phased-array-3]:FINAL
{
    @title = RA-X2 Phased Relay Antenna
    @description = An efficient phased array relay for communications at moderate distances. Can push a large amount of data at a very fast rate, if you have the power to do so. Rated for 200.0Mbps @100000km.
    @cost = 1500
    @entryCost = 10000
    @mass = 0.1
    %MODULE[TweakScale]
    {
        %type = free
    }
    %MODULE[ModuleSPUPassive] {}
    @MODULE[ModuleRTAntenna]
    {
        @EnergyCost = 0.0009503037500000003
        @Mode1DishRange = 100000000
        %DishAngle = 60.0
        %TRANSMITTER
        {
            %PacketInterval = 1
            %PacketSize = 200.0
            %PacketResourceCost = 0.7307389614636638
        }
    }
    %MODULE[ModuleAntennaFeed]
    {
        %FeedTransformName = AntennaFeedVector
        %FeedScale = 1
    }
}

// RA-00-2
// Range:20,000 km     Angle: 30째    Power: 0.9375w
@PART[nfex-antenna-relay-tiny-1]:After[RemoteTech]
{
    @description ^= :$:  Rated for 20,000 km.:
    @mass = 0.02
    %MODULE[ModuleRTAntenna] {
        %Mode0DishRange = 0
        %Mode1DishRange = 20000000  // 2w km
        %EnergyCost = 0.00026041666666666666
        %MaxQ = 3000
        %DishAngle = 30.0
        
        %TRANSMITTER {
            %PacketInterval = 0.3
            %PacketSize = 2
            %PacketResourceCost = 15.0
        }
    }
    
    %MODULE[ModuleSPUPassive] {}
    !MODULE[TweakScale] {}
    %MODULE[TweakScale]
    {
        type = free
    }
}

// RA-0-8
// Range:2 billion km     Angle: 0.1째    Power: 312.5w
@PART[nfex-antenna-relay-tdrs-1]:After[RemoteTech]
{
    @description ^= :$:  Rated for 2 billion km.:
    %MODULE[ModuleRTAntenna] {
        %Mode0DishRange = 0
        %Mode1DishRange = 2000000000000	// 5 billion km
        %EnergyCost = 0.08680555555555555
        %MaxQ = 6000
        %DishAngle = 0.1
        
        %TRANSMITTER {
            %PacketInterval = 0.3
            %PacketSize = 2
            %PacketResourceCost = 15.0
        }
    }
    
    %MODULE[ModuleSPUPassive] {}
    !MODULE[TweakScale] {}
    %MODULE[TweakScale]
    {
        type = free
    }
}

// RA-5B
// Range:5 billion km     Angle: 0.02째    Power: 156.25w
@PART[nfex-antenna-relay-tdrs-2]:After[RemoteTech]
{
    @description ^= :$:  Rated for 5 billion km.:
    %MODULE[ModuleRTAntenna] {
        %Mode0DishRange = 0
        %Mode1DishRange = 5000000000000	// 5 billion km
        %EnergyCost = 0.043402777777777776
        %MaxQ = 6000
        %DishAngle = 0.02
        
        %TRANSMITTER {
            %PacketInterval = 0.3
            %PacketSize = 2
            %PacketResourceCost = 15.0
        }
    }
    
    %MODULE[ModuleSPUPassive] {}
    !MODULE[TweakScale] {}
    %MODULE[TweakScale]
    {
        type = free
    }
}

// Reflectors
@PART[nfex-antenna-reflector-side-1]:After[RemoteTech]
{
    @description ^= :$:  Rated for 100 million km.:
    %MODULE[ModuleDeployableReflector] {
        %AddedRange =  100000000000    // 100 million km
    }
    !MODULE[TweakScale] {}
    %MODULE[TweakScale]
    {
        type = free
    }
}

// RFL-2
// 
@PART[nfex-antenna-reflector-side-2]:After[RemoteTech]
{
    @mass = 0.2
    @description ^= :$:  Rated for 1 billion km.:
    %MODULE[ModuleDeployableReflector] {
        %AddedRange = 500000000000  // 500 million km
    }
    !MODULE[TweakScale] {}
    %MODULE[TweakScale]
    {
        type = free
    }
}

// RFL-3
// 5 billion km     33.42AU
@PART[nfex-antenna-reflector-side-3]:After[RemoteTech]
{
    @rescaleFactor = 1.5
    @mass = 0.4
    @description ^= :$:  Rated for 2 billion km or 33.42AU.:
    %MODULE[ModuleDeployableReflector] {
        %AddedRange = 5000000000000
    }
    !MODULE[TweakScale] {}
    %MODULE[TweakScale]
    {
        type = free
    }
}

// RFL-50
@PART[nfex-antenna-reflector-large-1]:After[RemoteTech]
{
    @rescaleFactor = 2
    @mass = 1.5
    @description ^= :$:  Rated for 50 billion km.:
    %MODULE[ModuleDeployableReflector] {
        %AddedRange =  50000000000000	// 5 billion km
    }
    !MODULE[TweakScale] {}
    %MODULE[TweakScale]
    {
        type = free
    }
}

// RFL-100
@PART[nfex-antenna-reflector-huge-1]:After[RemoteTech]
{
    @mass = 2.5
    @description ^= :$:  Rated for 100 billion km.:
    %MODULE[ModuleDeployableReflector] {
        %AddedRange = 100000000000000	// 100 billion km
    }
    !MODULE[TweakScale] {}
    %MODULE[TweakScale]
    {
        type = free
    }
}

// RFL-2000
@PART[nfex-antenna-reflector-giant-1]:After[RemoteTech]
{
    %rescaleFactor = 2.5
    @mass = 8
    @description ^= :$:  Rated for 2000 billion km.:
    %MODULE[ModuleDeployableReflector] {
        %AddedRange = 2000000000000000	// 2000 billion km 
    }
    !MODULE[TweakScale] {}
    %MODULE[TweakScale]
    {
        type = free
    }
}