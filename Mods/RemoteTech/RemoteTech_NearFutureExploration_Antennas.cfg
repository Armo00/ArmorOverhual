// Modified 2024-02-03
// Support for Near-Future Exploration antennas and reflectors

// Antennas
@PART[nfex-antenna-rover-1]:After[RemoteTech]
{
    %MODULE[ModuleRTAntenna] {
        %Mode0DishRange = 0
        %Mode1DishRange = 20000000
        %EnergyCost = 0.00013020833333333333
        %MaxQ = 3000
        %DishAngle = 15.0
        
        %TRANSMITTER {
            %PacketInterval = 0.3
            %PacketSize = 2
            %PacketResourceCost = 15.0
        }
    }
    
    %MODULE[ModuleSPUPassive] {}
    !MODULE[TweakScale] {}
    %MODULE[TweakScale]
    {
        type = free
    }
}

@PART[nfex-antenna-rover-2]:After[RemoteTech]
{
    %MODULE[ModuleRTAntenna] {
        %Mode0DishRange = 0
        %Mode1DishRange = 9000000
        %EnergyCost = 0.000046875
        %MaxQ = 3000
        %DishAngle = 12.0
        
        %TRANSMITTER {
            %PacketInterval = 0.3
            %PacketSize = 2
            %PacketResourceCost = 15.0
        }
    }
    
    %MODULE[ModuleSPUPassive] {}
    !MODULE[TweakScale] {}
    %MODULE[TweakScale]
    {
        type = free
    }
}

@PART[nfex-antenna-rover-3]:After[RemoteTech]
{
    %MODULE[ModuleRTAntenna] {
        %Mode0DishRange = 0
        %Mode1DishRange = 50000000
        %EnergyCost = 0.0006510416666666666
        %MaxQ = 3000
        %DishAngle = 30.0
        
        %TRANSMITTER {
            %PacketInterval = 0.3
            %PacketSize = 2
            %PacketResourceCost = 15.0
        }
    }
    
    %MODULE[ModuleSPUPassive] {}
    !MODULE[TweakScale] {}
    %MODULE[TweakScale]
    {
        type = free
    }
}

@PART[nfex-antenna-static-mini-1]:After[RemoteTech]
{
    %MODULE[ModuleRTAntenna] {
        %Mode0DishRange = 0
        %Mode1DishRange = 1300000000
        %EnergyCost = 0.0028211805555555555
        %MaxQ = 6000
        %DishAngle = 5.0
        
        %TRANSMITTER {
            %PacketInterval = 0.3
            %PacketSize = 2
            %PacketResourceCost = 15.0
        }
    }
    
    %MODULE[ModuleSPUPassive] {}
    !MODULE[TweakScale] {}
    %MODULE[TweakScale]
    {
        type = free
    }
}

@PART[nfex-antenna-top-dish-1]:After[RemoteTech]
{
    %MODULE[ModuleRTAntenna] {
        %Mode0DishRange = 0
        %Mode1DishRange = 160000000 
        %EnergyCost = 0.0024305555555555556
        %MaxQ = 3000
        %DishAngle = 35.0
        
        %TRANSMITTER {
            %PacketInterval = 0.3
            %PacketSize = 2
            %PacketResourceCost = 15.0
        }
    }
    
    %MODULE[ModuleSPUPassive] {}
    !MODULE[TweakScale] {}
    %MODULE[TweakScale]
    {
        type = free
    }
}

@PART[nfex-antenna-top-dish-2]:After[RemoteTech]
{
    %MODULE[ModuleRTAntenna] {
        %Mode0DishRange = 0
        %Mode1DishRange = 6500000000 
        %EnergyCost = 0.11284722222222222
        %MaxQ = 6000
        %DishAngle = 40.0
        
        %TRANSMITTER {
            %PacketInterval = 0.3
            %PacketSize = 5
            %PacketResourceCost = 20.0
        }
    }
    
    %MODULE[ModuleSPUPassive] {}
    !MODULE[TweakScale] {}
    %MODULE[TweakScale]
    {
        type = free
    }
}

@PART[nfex-antenna-phased-single-1]:After[RemoteTech]
{
    %MODULE[ModuleRTAntenna] {
        %Mode0DishRange = 0
        %Mode1DishRange = 1200000
        %EnergyCost = 0.03
        %MaxQ = 3000
        %DishAngle = 12.0
        
        %TRANSMITTER {
            %PacketInterval = 0.3
            %PacketSize = 2
            %PacketResourceCost = 15.0
        }
    }
    
    %MODULE[ModuleSPUPassive] {}
    !MODULE[TweakScale] {}
    %MODULE[TweakScale]
    {
        type = free
    }
}

@PART[nfex-antenna-phased-single-2]:After[RemoteTech]
{
    %MODULE[ModuleRTAntenna] {
        %Mode0DishRange = 0
        %Mode1DishRange = 8000000
        %EnergyCost = 0.2
        %MaxQ = 3000
        %DishAngle = 12.0
        
        %TRANSMITTER {
            %PacketInterval = 0.3
            %PacketSize = 2
            %PacketResourceCost = 15.0
        }
    }
    
    %MODULE[ModuleSPUPassive] {}
    !MODULE[TweakScale] {}
    %MODULE[TweakScale]
    {
        type = free
    }
}

@PART[nfex-antenna-phased-single-3]:After[RemoteTech]
{
    %MODULE[ModuleRTAntenna] {
        %Mode0DishRange = 0
        %Mode1DishRange = 18000000
        %EnergyCost = 0.5
        %DishAngle = 22.0
        
        %TRANSMITTER {
            %PacketInterval = 0.3
            %PacketSize = 2
            %PacketResourceCost = 15.0
        }
    }
    
    %MODULE[ModuleSPUPassive] {}
    !MODULE[TweakScale] {}
    %MODULE[TweakScale]
    {
        type = free
    }
}

// DR-3
// Range:0.7 million km     Angle: 10°    Power: 10.9375w
@PART[nfex-antenna-deploy-wv3-1]:After[RemoteTech]
{
    @description ^= :$:  Rated for 0.7 million km.:
    %MODULE[ModuleRTAntenna] {
        %Mode0DishRange = 0
        %Mode1DishRange = 700000000 // 0.7 million km   
        %EnergyCost = 0.0030381944444444445
        %MaxQ = 6000
        %DishAngle = 10.0
        
        %TRANSMITTER {
            %PacketInterval = 0.3
            %PacketSize = 2
            %PacketResourceCost = 15.0
        }
    }
    
    %MODULE[ModuleSPUPassive] {}
    !MODULE[TweakScale] {}
    %MODULE[TweakScale]
    {
        type = free
    }
}

// F-DA
// Range:100 km     Angle: 10°    Power: 14.4w
@PART[nfex-antenna-feeder-direct-1]:After[RemoteTech]
{
    %MODULE[ModuleRTAntenna] {
        %Mode0DishRange = 0
        %Mode1DishRange = 100000
        %EnergyCost = 0.004
        %MaxQ = 6000
        %DishAngle = 10.0
        
        %TRANSMITTER {
            %PacketInterval = 0.3
            %PacketSize = 2
            %PacketResourceCost = 15.0
        }
    }
    MODULE
    {
        name = ModuleAntennaFeed
        FeedTransformName = AntennaFeedVector
        FeedScale = 1
    }  
    
    %MODULE[ModuleSPUPassive] {}
    !MODULE[TweakScale] {}
    %MODULE[TweakScale]
    {
        type = free
    }
}

// F-RA
// Range:300 km     Angle: 10°    Power: 28.8w
@PART[nfex-antenna-feeder-relay-1]:After[RemoteTech]
{
    %MODULE[ModuleRTAntenna] {
        %Mode0DishRange = 0
        %Mode1DishRange = 300000
        %EnergyCost = 0.008
        %MaxQ = 3000
        %DishAngle = 10.0
        
        %TRANSMITTER {
            %PacketInterval = 0.3
            %PacketSize = 2
            %PacketResourceCost = 15.0
        }
    }
    MODULE
    {
        name = ModuleAntennaFeed
        FeedTransformName = AntennaFeedVector
        FeedScale = 1
    }
    %MODULE[ModuleSPUPassive] {}
    !MODULE[TweakScale] {}
    %MODULE[TweakScale]
    {
        type = free
    }
}

// RA-X1
// Range:22,000 km     Angle: 90°    Power: 3.094w
@PART[nfex-antenna-phased-array-1]:After[RemoteTech]
{
    @mass = 0.025
    @cost = 250
    @description ^= :$:  Rated for 22,000 km.:
    %MODULE[ModuleRTAntenna] {
        %Mode0DishRange = 0
        %Mode1DishRange = 22000000
        %EnergyCost = 0.000859375
        %MaxQ = 3000
        %DishAngle = 90.0
        
        %TRANSMITTER {
            %PacketInterval = 0.3
            %PacketSize = 2
            %PacketResourceCost = 15.0
        }
    }
    
    %MODULE[ModuleSPUPassive] {}
    !MODULE[TweakScale] {}
    %MODULE[TweakScale]
    {
        type = free
    }
}

// RA-X3
// Range:20 million km     Angle: 1300°    Power: 4062.5w
@PART[nfex-antenna-phased-array-2]:After[RemoteTech]
{
    @mass = 0.25
    @cost = 2500
    @title = RA-X3 Phased Relay Antenna
    @description ^= :$:  Rated for 20 million km.:
    %MODULE[ModuleRTAntenna] {
        %Mode0DishRange = 0
        %Mode1DishRange = 20000000000
        %EnergyCost = 1.1284722222222223
        %DishAngle = 130.0
        
        %TRANSMITTER {
            %PacketInterval = 0.3
            %PacketSize = 2
            %PacketResourceCost = 15.0
        }
    }
    
    %MODULE[ModuleSPUPassive] {}
    !MODULE[TweakScale] {}
    %MODULE[TweakScale]
    {
        type = free
    }
}

// RA-X2
// Range:5 million km     Angle: 60°    Power: 468.75w
@PART[nfex-antenna-phased-array-3]:After[RemoteTech]
{
    @mass = 0.15
    @cost = 1500
    @title = RA-X2 Phased Relay Antenna
    @description ^= :$:  Rated for 5 million km.:
    %MODULE[ModuleRTAntenna] {
        %Mode0DishRange = 0
        %Mode1DishRange = 5000000000    // 5 million km
        %EnergyCost = 0.13020833333333334
        %DishAngle = 60.0
        
        %TRANSMITTER {
            %PacketInterval = 0.3
            %PacketSize = 2
            %PacketResourceCost = 15.0
        }
    }
    
    %MODULE[ModuleSPUPassive] {}
    !MODULE[TweakScale] {}
    %MODULE[TweakScale]
    {
        type = free
    }
}

// RA-00-2
// Range:20,000 km     Angle: 30°    Power: 0.9375w
@PART[nfex-antenna-relay-tiny-1]:After[RemoteTech]
{
    @description ^= :$:  Rated for 20,000 km.:
    @mass = 0.02
    %MODULE[ModuleRTAntenna] {
        %Mode0DishRange = 0
        %Mode1DishRange = 20000000  // 2w km
        %EnergyCost = 0.00026041666666666666
        %MaxQ = 3000
        %DishAngle = 30.0
        
        %TRANSMITTER {
            %PacketInterval = 0.3
            %PacketSize = 2
            %PacketResourceCost = 15.0
        }
    }
    
    %MODULE[ModuleSPUPassive] {}
    !MODULE[TweakScale] {}
    %MODULE[TweakScale]
    {
        type = free
    }
}

// RA-0-8
// Range:2 billion km     Angle: 0.1°    Power: 312.5w
@PART[nfex-antenna-relay-tdrs-1]:After[RemoteTech]
{
    @description ^= :$:  Rated for 2 billion km.:
    %MODULE[ModuleRTAntenna] {
        %Mode0DishRange = 0
        %Mode1DishRange = 2000000000000	// 5 billion km
        %EnergyCost = 0.08680555555555555
        %MaxQ = 6000
        %DishAngle = 0.1
        
        %TRANSMITTER {
            %PacketInterval = 0.3
            %PacketSize = 2
            %PacketResourceCost = 15.0
        }
    }
    
    %MODULE[ModuleSPUPassive] {}
    !MODULE[TweakScale] {}
    %MODULE[TweakScale]
    {
        type = free
    }
}

// RA-5B
// Range:5 billion km     Angle: 0.02°    Power: 156.25w
@PART[nfex-antenna-relay-tdrs-2]:After[RemoteTech]
{
    @description ^= :$:  Rated for 5 billion km.:
    %MODULE[ModuleRTAntenna] {
        %Mode0DishRange = 0
        %Mode1DishRange = 5000000000000	// 5 billion km
        %EnergyCost = 0.043402777777777776
        %MaxQ = 6000
        %DishAngle = 0.02
        
        %TRANSMITTER {
            %PacketInterval = 0.3
            %PacketSize = 2
            %PacketResourceCost = 15.0
        }
    }
    
    %MODULE[ModuleSPUPassive] {}
    !MODULE[TweakScale] {}
    %MODULE[TweakScale]
    {
        type = free
    }
}

// Reflectors
@PART[nfex-antenna-reflector-side-1]:After[RemoteTech]
{
    @description ^= :$:  Rated for 100 million km.:
    %MODULE[ModuleDeployableReflector] {
        %AddedRange =  100000000000    // 100 million km
    }
    !MODULE[TweakScale] {}
    %MODULE[TweakScale]
    {
        type = free
    }
}

// RFL-2
// 
@PART[nfex-antenna-reflector-side-2]:After[RemoteTech]
{
    @mass = 0.2
    @description ^= :$:  Rated for 1 billion km.:
    %MODULE[ModuleDeployableReflector] {
        %AddedRange = 500000000000  // 500 million km
    }
    !MODULE[TweakScale] {}
    %MODULE[TweakScale]
    {
        type = free
    }
}

// RFL-3
// 5 billion km     33.42AU
@PART[nfex-antenna-reflector-side-3]:After[RemoteTech]
{
    @rescaleFactor = 1.5
    @mass = 0.4
    @description ^= :$:  Rated for 2 billion km or 33.42AU.:
    %MODULE[ModuleDeployableReflector] {
        %AddedRange = 5000000000000
    }
    !MODULE[TweakScale] {}
    %MODULE[TweakScale]
    {
        type = free
    }
}

// RFL-50
@PART[nfex-antenna-reflector-large-1]:After[RemoteTech]
{
    @rescaleFactor = 2
    @mass = 1.5
    @description ^= :$:  Rated for 50 billion km.:
    %MODULE[ModuleDeployableReflector] {
        %AddedRange =  50000000000000	// 5 billion km
    }
    !MODULE[TweakScale] {}
    %MODULE[TweakScale]
    {
        type = free
    }
}

// RFL-100
@PART[nfex-antenna-reflector-huge-1]:After[RemoteTech]
{
    @mass = 2.5
    @description ^= :$:  Rated for 100 billion km.:
    %MODULE[ModuleDeployableReflector] {
        %AddedRange = 100000000000000	// 100 billion km
    }
    !MODULE[TweakScale] {}
    %MODULE[TweakScale]
    {
        type = free
    }
}

// RFL-2000
@PART[nfex-antenna-reflector-giant-1]:After[RemoteTech]
{
    %rescaleFactor = 2.5
    @mass = 8
    @description ^= :$:  Rated for 2000 billion km.:
    %MODULE[ModuleDeployableReflector] {
        %AddedRange = 2000000000000000	// 2000 billion km 
    }
    !MODULE[TweakScale] {}
    %MODULE[TweakScale]
    {
        type = free
    }
}