//Modified 2022-4-23

//	================================================================================
//	General Configs
//	================================================================================

@PART[SEP_B4_*]:
{
	@rescaleFactor = 1.0
	@manufacturer = SpaceX
	@tags = SpaceX, Starship, SuperHeavy, Booster

	@breakingForce = 999
	@breakingTorque = 999
	@crashTolerance = 20

	%maxTemp = 2800
	%skinMaxTemp = 3400
	%skinMassPerArea = 6.0
	%emissiveConstant = 0.54
	%thermalMassModifier = 1.0

	MODULE
	{
		name = ModuleAeroReentry
		leaveTemp = true
		skinMaxOperationalTemp = 3400
	}
}

@PART[SEP_B4_*]:AFTER[FerramAerospaceResearch]
{
	@MODULE[GeometryPartModule]
	{
		%forceUseMeshes = True
	}
}

//	================================================================================
//	SuperHeavy 2021 Configs
//	================================================================================

@PART[SEP_B4_INTER]:
{
	@title = Super Heavy Interstage
	@description = This interstage is responsible for attaching Starship onto SuperHeavy, with integrated avionics it has everything to return itself to the launch site for rapid reusability.
	@mass = 8
	
	@MODULE[ModuleCommand]
	{
		RESOURCE
		{
			name = ElectricCharge
			rate = 1.4  //5000w
		}
	}
	MODULE
	{
		name = ModuleFuelTanks
		type = ServiceModule
		volume = 20
		basemass = -1
		TANK
		{
			name = ElectricCharge
			amount = Full
			maxAmount = 100%
		}
	}
    !MODULE[ModuleDataTransmitter] {}
    %MODULE[ModuleSPU] {}
    MODULE
    {
        name = ModuleRTAntenna
        IsRTActive = True
        Mode0OmniRange = 0
        Mode1OmniRange = 64000000   // 6.4w km
        EnergyCost = 0.01           // 36w
        TRANSMITTER
        {
            PacketInterval = 1.0
            PacketSize = 0.512
            PacketResourceCost = 0.025
        }
    }
}

@PART[SEP_B4_CORE]:Final
{
	!RESOURCE,* {}
	!MODULE[ModuleRCSFX],* {}
	!MODULE[ModuleReactionWheel],* {}
	!MODULE[ModuleFuelTanks],* {}
	@title = Super Heavy Core
	@description = This massive fuel tank have all the fuel needed for your SuperHeavy booster.
	@mass = 80
	
	MODULE
	{
		name = ModuleRCSFX
		stagingEnabled = True
		thrusterTransformName = RCS
		thrusterPower = 100
		resourceFlowMode = STAGE_PRIORITY_FLOW
		runningEffectName = running
		showToggles = False
		PROPELLANT
		{
			name = LqdMethane
			ratio = 0.4137
		}
		PROPELLANT
		{
			name = LqdOxygen
			ratio = 0.5863
		}
		atmosphereCurve
		{
			key = 0 330
			key = 1 280
		}
	}
    MODULE
    {
        name = ModuleReactionWheel
        PitchTorque = 4000
        YawTorque = 4000
        RollTorque = 100
        RESOURCE
        {
            name = ElectricCharge
            rate = 0.015
        }
    }
	MODULE
	{
		name = ModuleFuelTanks
		volume = 4080108
		type = ServiceModule
		basemass = -1
		TANK
		{
			name = LqdMethane
			amount = Full
			maxAmount = 41.37%
		}
		TANK
		{
			name = LqdOxygen
			amount = Full
			maxAmount = 58.63%
		}
	}
}

@PART[SEP_B4_33_CLUSTER]:
{
	!MODULE[ModuleAlternator],* {}
	
	@title = Super Heavy 33 Raptor Cluster
	@mass = 66
	@description = This powerful cluster of 33 raptor engines is responsible for lifting a starship stack and returning itself for rapid reusability.
	@angularDrag = 0
    %bodyLiftMultiplier = 0.1

    @MODULE[ModuleEngines*]
    {
        @name = ModuleEnginesRF
    }
	
	@MODULE[ModuleEngines*],*
	{
		%throttleResponseRate = 3
	}
	MODULE
	{
		name = ModuleEngineConfigs
		type = ModuleEngines
		configuration = All Raptors
		modded = false
		engineID = AllEngines

		CONFIG
		{
			name = All Raptors
			maxThrust = 75900
			minThrust = 30360 // 40% throttle
			heatProduction = 100
			PROPELLANT // Ratio = 3.8
			{
				name = LqdMethane
				ratio = 0.4137
				DrawGauge = true
			}
			PROPELLANT
			{
				name = LqdOxygen
				ratio = 0.5863
			}
			atmosphereCurve
			{
				key = 0 363
				key = 1 330
			}

			ullage = True
			pressureFed = False
			ignitions = 0
			gimbalRange = 15

			IGNITOR_RESOURCE
			{
				name = ElectricCharge
				amount = 99
			}
			IGNITOR_RESOURCE // Torch-Lit System uses the same propellant has the engines [5]
			{
				name = LqdMethane
				amount = 0.4137 // ~ Guess
			}
			IGNITOR_RESOURCE // Torch-Lit System uses the same propellant has the engines [5]
			{
				name = LqdOxygen
				amount = 0.5863 // ~ Guess
			}

			massMult = 1.0
		}
	}
	
	MODULE
	{
		name = ModuleEngineConfigs
		type = ModuleEngines
		configuration = 13 Raptors
		modded = false
		engineID = MiddleInner

		CONFIG
		{
			name = 13 Raptors
			maxThrust = 29900
			minThrust = 11960 // 40% throttle
			heatProduction = 100
			PROPELLANT // Ratio = 3.8
			{
				name = LqdMethane
				ratio = 0.4137
				DrawGauge = true
			}
			PROPELLANT
			{
				name = LqdOxygen
				ratio = 0.5863
			}
			atmosphereCurve
			{
				key = 0 363
				key = 1 330
			}

			ullage = True
			pressureFed = False
			ignitions = 0
			gimbalRange = 15

			IGNITOR_RESOURCE
			{
				name = ElectricCharge
				amount = 39
			}
			IGNITOR_RESOURCE // Torch-Lit System uses the same propellant has the engines [5]
			{
				name = LqdMethane
				amount = 0.4137 // ~ Guess
			}
			IGNITOR_RESOURCE // Torch-Lit System uses the same propellant has the engines [5]
			{
				name = LqdOxygen
				amount = 0.5863 // ~ Guess
			}

			massMult = 1.0
		}
	}
}

@PART[SEP_B4_29_CLUSTER]:
{
	!MODULE[ModuleAlternator],* {}
	
	@title = Super Heavy 29 Raptor Cluster
	@mass = 58
	@description = This powerful cluster of 29 raptor engines is responsible for lifting a starship stack and returning itself for rapid reusability.
	@angularDrag = 0
    %bodyLiftMultiplier = 0.1
	
	@MODULE[ModuleEngines*],*
	{
		%throttleResponseRate = 3
	}
    @MODULE[ModuleEngines*]
    {
        @name = ModuleEnginesRF
    }
	MODULE
	{
		name = ModuleEngineConfigs
		type = ModuleEngines
		configuration = All Raptors
		modded = false
		engineID = AllEngines

		CONFIG
		{
			name = All Raptors
			maxThrust = 66700
			minThrust = 26680 // 40% throttle
			heatProduction = 100
			PROPELLANT // Ratio = 3.8
			{
				name = LqdMethane
				ratio = 0.4137
				DrawGauge = true
			}
			PROPELLANT
			{
				name = LqdOxygen
				ratio = 0.5863
			}
			atmosphereCurve
			{
				key = 0 363
				key = 1 330
			}

			ullage = True
			pressureFed = False
			ignitions = 0
			gimbalRange = 15

			IGNITOR_RESOURCE
			{
				name = ElectricCharge
				amount = 87
			}
			IGNITOR_RESOURCE // Torch-Lit System uses the same propellant has the engines [5]
			{
				name = LqdMethane
				amount = 0.4137 // ~ Guess
			}
			IGNITOR_RESOURCE // Torch-Lit System uses the same propellant has the engines [5]
			{
				name = LqdOxygen
				amount = 0.5863 // ~ Guess
			}

			massMult = 1.0
		}
	}
	
	MODULE
	{
		name = ModuleEngineConfigs
		type = ModuleEngines
		configuration = 10 Raptors
		modded = false
		engineID = MiddleInner

		CONFIG
		{
			name = 10 Raptors
			maxThrust = 23000
			minThrust = 9200 // 40% throttle
			heatProduction = 100
			PROPELLANT // Ratio = 3.8
			{
				name = LqdMethane
				ratio = 0.4137
				DrawGauge = true
			}
			PROPELLANT
			{
				name = LqdOxygen
				ratio = 0.5863
			}
			atmosphereCurve
			{
				key = 0 363
				key = 1 330
			}

			ullage = True
			pressureFed = False
			ignitions = 0
			gimbalRange = 15

			IGNITOR_RESOURCE
			{
				name = ElectricCharge
				amount = 30
			}
			IGNITOR_RESOURCE // Torch-Lit System uses the same propellant has the engines [5]
			{
				name = LqdMethane
				amount = 0.4137 // ~ Guess
			}
			IGNITOR_RESOURCE // Torch-Lit System uses the same propellant has the engines [5]
			{
				name = LqdOxygen
				amount = 0.5863 // ~ Guess
			}

			massMult = 1.0
		}
	}

}

@PART[SEP_B4_GRIDFIN]:
{
	@title = Super Heavy Grid fin
	@description = This is not a big waffle, but a powerfull tool to keep your big booster on course through reentry and landing
	@mass = 3
		
}