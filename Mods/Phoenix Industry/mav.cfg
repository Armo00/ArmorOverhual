// Modified 2022-7-18

// Common MAV Content:
@PART[CTNmavPOD|ctnMAV|ctnInterstage|ctnMAVbase]:Final
{
    %tags = MAV
    @rescaleFactor = 2
    !RESOURCE,*{}
    !MODULE[ModuleFuelTanks] {}
    %MODULE[TweakScale]
    {
        %type = stack
        %defaultScale = 5
    }
}

@PART[CTNmavPOD]:Final
{
    @CrewCapacity = 7
    @mass = 5
    @maxTemp = 3900
    @description = A full-sized version of a seven-man command pod. Comes with its own RCS and heatshield!
    !INTERNAL{}
    INTERNAL
    {
        name = CST100internal
    }
    @MODULE[ModuleCommand]
    {
        @minimumCrew = 0	
    }

    MODULE
    {
        name = ModuleFuelTanks
        type = ServiceModule
        volume = 2000
        basemass = -1
        TANK
        {
            name = Food
            amount = Full
            maxAmount = 17.54784
            @maxAmount *= 7    // rated for 7 crew 3 days
        }
        TANK
        {
            name = Water
            amount = Full
            maxAmount = 11.6121658
            @maxAmount *= 7
        }
        TANK
        {
            name = Oxygen
            amount = Full
            maxAmount = 1775.53
            @maxAmount *= 7
        }
        TANK
        {
            name = ElectricCharge
            amount = 15000
            maxAmount = 15000
        }
    }

    @MODULE[ModuleRCS*]
    {
        @name = ModuleRCSFX
        %runningEffectName = running
        @thrusterPower = 1.2
        !resourceName = NULL
        PROPELLANT
        {
            name = MMH
            ratio = 0.4990
            DrawGauge = True
            resourceFlowMode = STAGE_PRIORITY_FLOW
        }
        PROPELLANT
        {
            name = NTO
            ratio = 0.5010
            resourceFlowMode = STAGE_PRIORITY_FLOW
        }

        @atmosphereCurve
        {
            @key,0 = 0 302
            @key,1 = 1 260
        }
    }

    RESOURCE
    {
        name = Ablator
        amount = 800
        maxAmount = 800
    }
    @MODULE[ModuleAblator]
    {
        @lossExp = -12000
        @lossConst = 0.1
        @pyrolysisLossFactor = 46000
    }
}

@PART[ctnInterstage]:Final
{
    @rescaleFactor = 2
    @mass = 1.5
    !RESOURCE,*{}
    MODULE
    {
        name = ModuleFuelTanks
        type = ServiceModule
        volume = 25000
        basemass = -1
        TANK
        {
            name = Food
            amount = Full
            maxAmount = 17.54784
            @maxAmount *= 21    // rated for 7 crew 9 days
        }
        TANK
        {
            name = Water
            amount = Full
            maxAmount = 11.6121658
            @maxAmount *= 21
        }
        TANK
        {
            name = Oxygen
            amount = Full
            maxAmount = 1775.53
            @maxAmount *= 21
        }
        TANK
        {
            name = ElectricCharge
            amount = 15000
            maxAmount = 15000
        }
    }

    @MODULE[ModuleRCS*]
    {
        @name = ModuleRCSFX
        %runningEffectName = running
        @thrusterPower = 1.5
        !resourceName = NULL
        PROPELLANT
        {
            name = MMH
            ratio = 0.4990
            DrawGauge = True
            resourceFlowMode = STAGE_PRIORITY_FLOW
        }
        PROPELLANT
        {
            name = NTO
            ratio = 0.5010
            resourceFlowMode = STAGE_PRIORITY_FLOW
        }

        @atmosphereCurve
        {
            @key,0 = 0 302
            @key,1 = 1 260
        }
    }

    !MODULE[ModuleGenerator],*{}
    MODULE
    {
        name = ModuleGenerator
        isAlwaysActive = true
        OUTPUT_RESOURCE
        {
            name = ElectricCharge
            rate = 2.4
        }
    }
}

@PART[ctnMAV]:Final
{
    @mass = 6
    MODULE
    {
        name = ModuleFuelTanks
        type = ServiceModule
        volume = 220000
        basemass = -1
        TANK
        {
            name = ElectricCharge
            amount = 15000
            maxAmount = 15000
        }
    }

    !MODULE[ModuleGenerator],*{}
    MODULE
    {
        name = ModuleGenerator
        isAlwaysActive = true
        OUTPUT_RESOURCE
        {
            name = ElectricCharge
            rate = 5
        }
    }

    MODULE
    {
        name = ModuleDecouple
        ejectionForce = 100
        explosiveNodeID = top
    }
    
}

@PART[ctnMAVbase]:Final
{
    @mass = 3 
}