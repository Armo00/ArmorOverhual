// RE-I5 "Skipper" Liquid Fuel Engine
// Modified 2022-4-23
// Related to YF-77, Scaled to 2.5m(*1.5)
// Base: Hydralox  ISP:320-431 Thrust:800-1500  mass:2.5    TWR:61.22

@PART[engineLargeSkipper_v2]:Final
{
    @mass = 2.5
    @entryCost = 80000
    @maxTemp = 3200

    @MODULE[ModuleEngines*]
    {
        @name = ModuleEnginesRF
    }

    MODULE
    {
        name = ModuleEngineConfigs
        type = ModuleEngines
        configuration = Hydralox
        origMass = -1

        CONFIG
        {
            name = Hydralox
            description = Hydralox
            minThrust = 800
            maxThrust = 1500
            heatProduction = 25
            massMult = 1.0
            ullage = True
            pressureFed = False
            ignitions = 1
            IGNITOR_RESOURCE
            {
                name = ElectricCharge
                amount = 3
            }
            PROPELLANT
            {
                name = Kerosene
                ratio = 37.694087
                DrawGauge = True
            }
            PROPELLANT
            {
                name = LqdOxygen
                ratio = 62.305913
            }
            atmosphereCurve
            {
                key = 0 431
                key = 1 320
            }
        }

        CONFIG
        {
            name = Methalox
            description = Methalox
            minThrust = 1000
            maxThrust = 1800
            heatProduction = 25
            massMult = 0.90
            ullage = True
            pressureFed = False
            ignitions = 2
            IGNITOR_RESOURCE
            {
                name = ElectricCharge
                amount = 2
            }
            PROPELLANT // Ratio = 3.8
            {
                name = LqdMethane
                ratio = 0.4137
                DrawGauge = true
            }
            PROPELLANT
            {
                name = LqdOxygen
                ratio = 0.5863
            }
            atmosphereCurve
            {
                key = 0 360
                key = 1 230
            }
        }
    }
    !MODULE[ModuleWaterfallFX] {}
    !EFFECTS {}
    !MODULE[EngineLightEffect] {}

    EFFECTS
    {
        engage
        {
            AUDIO
            {
                channel = Ship
                clip = Waterfall/Sounds/ZorgSounds/engage_raptor
                volume = 1.0
                pitch = 1.0
                loop = false
            }
        }
        disengage
        {
            AUDIO
            {
                channel = Ship
                clip = sound_vent_soft
                volume = 1.0
                pitch = 2.0
                loop = false
            }
        }
        flameout
        {
            PREFAB_PARTICLE
            {
                prefabName = fx_exhaustSparks_flameout_2
                transformName = smokePoint
                oneShot = true
            }
            AUDIO
            {
                channel = Ship
                clip = sound_explosion_low
                volume = 1.0
                pitch = 2.0
                loop = false
            }
        }
        fx-skipper-running
        {
            AUDIO
            {
                channel = Ship
                clip = Waterfall/Sounds/EnsouSounds/Loop_Liquid_Heavy_High_2
                volume = 0.0 0.0
                volume = 0.05 0.6
                volume = 1.0 1.5
                pitch = 0.0 0.7
                pitch = 1.0 1.0
                loop = true
            }

            PREFAB_PARTICLE
            {
                prefabName = fx_smokeTrail_veryLarge
                transformName = smokePoint
                emission = 0.0 0.0
                emission = 0.05 0.0
                emission = 0.075 0.25
                emission = 1.0 1.25
                speed = 0.0 0.25
                speed = 1.0 1.0
                localOffset = 0, 0, 1
            }
        }
    }
    MODULE
    {
        name = ModuleWaterfallFX
        // This is a custom name
        moduleID = skipperFX
        // This links the effects to a given ModuleEngines
        engineID = basicEngine

        // List out all controllers we want available
        // This controller scales with atmosphere depth
        CONTROLLER
        {
            name = atmosphereDepth
            linkedTo = atmosphere_density
        }
        // This controller scales with effective throttle
        CONTROLLER
        {
            name = throttle
            linkedTo = throttle
        }
        // this controller generates a random value in the range specified
        CONTROLLER
        {
            name = random
            linkedTo = random
            range = -1,1
        }
        // -----------------------------------------------------
        // Past here should be generated with the ingame editor!
        // -----------------------------------------------------
        TEMPLATE
        {
            // This is the name of the template to use
            templateName = waterfall-hydrolox-lower-2
            // This field allows you to override the parentTransform name in the EFFECTS contained in the template
            overrideParentTransform = thrustTransform
            position = 0,0,0
            rotation = 0, 0, 0
            scale = 0.73, 0.73, 0.8
        }
    }
}