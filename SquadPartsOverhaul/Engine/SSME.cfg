// S3 KS-25 "Vector" Liquid Fuel Engine
// Modified 2022-12-19
// Based on RS-25
// Base: Hydralox  ISP:366-452.3 Thrust:1357-2319.9  mass:3.177    TWR:74.51

@PART[SSME]:Final
{
    @rescaleFactor = 1.92
    @mass = 3.177
    @entryCost = 1600000
    @cost = 15000
    @maxTemp = 3200
    %title = RS-25 (SSME)
	%manufacturer = Rocketdyne
	%description = The RS-25, also known as the Space Shuttle Main Engine (SSME), is a LH2/LOX fuel-rich staged combustion engine. Though complex and expensive, these engines provide very high performance and are extremely reliable. Three of these engines powered each Shuttle Orbiter and four will be used on the core stage of the SLS.

    @MODULE[ModuleEngines*]
    {
        @name = ModuleEnginesRF
    }
    
    %MODULE[TweakScale]
    {
        %type = stack
        %defaultScale = 2.4
    }

    MODULE
    {
        name = ModuleEngineConfigs
        type = ModuleEngines
        configuration = RS-25D/E
        origMass = 3.177

        CONFIG
        {
            name = RS-25D/E
            description = Block II SSME. Rated up to 111% thrust in an emergency. To be used on SLS as the RS-25E
            minThrust = 1357
            maxThrust = 2319.9
            heatProduction = 25
            massMult = 1.0
            cost = 25000
            ullage = True
            pressureFed = False
            ignitions = 0
            IGNITOR_RESOURCE
            {
                name = ElectricCharge
                amount = 3
            }
            atmosphereCurve
            {
                key = 0 452.3
                key = 1 366
            }
            PROPELLANT
            {
                name = LqdHydrogen
                ratio = 0.7276
                DrawGauge = true
            }
            PROPELLANT
            {
                name = LqdOxygen
                ratio = 0.2724
            }
        }

        CONFIG
        {
            name = Methalox
            description = Methalox
            minThrust = 800
            maxThrust = 3000
            heatProduction = 25
            massMult = 0.90
            ullage = True
            pressureFed = False
            ignitions = 0
            IGNITOR_RESOURCE
            {
                name = ElectricCharge
                amount = 2
            }
            PROPELLANT // Ratio = 3.8
            {
                name = LqdMethane
                ratio = 0.4137
                DrawGauge = true
            }
            PROPELLANT
            {
                name = LqdOxygen
                ratio = 0.5863
            }
            atmosphereCurve
            {
                key = 0 365
                key = 1 320
            }
        }
    }

    // Engine configured by KnightofStJohn
    !MODULE[ModuleWaterfallFX] {}
    // Removes the stock effect block, and replace it with one that has no particles
    !EFFECTS {}
    !MODULE[EngineLightEffect] {}

    EFFECTS
    {
        engage
        {
            AUDIO
            {
                channel = Ship
                clip = Waterfall/Sounds/KW/sound_liq4
                volume = 1.0
                pitch = 1.0
                loop = false
            }
        }
        disengage
        {
            AUDIO
            {
                channel = Ship
                clip = sound_vent_soft
                volume = 1.0
                pitch = 2.0
                loop = false
            }
        }
        flameout
        {
            AUDIO
            {
                channel = Ship
                clip = sound_explosion_low
                volume = 1.0
                pitch = 2.0
                loop = false
            }
        }
        fx-vector-running
        {
            AUDIO
            {
                channel = Ship
                clip = Waterfall/Sounds/EnsouSounds/Loop_Liquid_Medium_High_2
                volume = 0.0 0.0
                volume = 0.05 0.6
                volume = 1.0 1.0
                pitch = 0.0 0.7
                pitch = 1.0 1.0
                loop = true
            }
        }
    }
    MODULE
    {
        name = ModuleWaterfallFX
        // This is a custom name
        moduleID = rs25FX
        // This links the effects to a given ModuleEngines
        engineID = basicEngine

        // List out all controllers we want available
        CONTROLLER
        {
            name = atmosphereDepth
            linkedTo = atmosphere_density
        }
        CONTROLLER
        {
            name = throttle
            linkedTo = throttle
        }
        CONTROLLER
        {
            name = randomshock1
            linkedTo = random
            // The noise distribution type
            noiseType = perlin
            // distribution parameters
            scale = 1
            speed = 5
            seed = 1
        }
        CONTROLLER
        {
            name = randomshock2
            linkedTo = random
            // The noise distribution type
            noiseType = perlin
            // distribution parameters
            scale = 1
            speed = 8
            seed = 10
        }
        CONTROLLER
        {
            name = randomshock3
            linkedTo = random
            // The noise distribution type
            noiseType = perlin
            // distribution parameters
            scale = 1
            speed = 5
            seed = 100
        }
        CONTROLLER
        {
            name = randomshock4
            linkedTo = random
            // The noise distribution type
            noiseType = perlin
            // distribution parameters
            scale = 1
            speed = 8
            seed = 1000
        }

        TEMPLATE
        {
            // This is the name of the template to use
            templateName = waterfall-hydrolox-rs25-1
            // This field allows you to override the parentTransform name in the EFFECTS contained in the template
            overrideParentTransform = fxTransformCore
            position = 0,-0.4,0
            rotation = 90, 0, 0
            scale = 1.025, 1.025, 1.025
            @scale[*] *= #$/rescaleFactor$
        }
    }
}
